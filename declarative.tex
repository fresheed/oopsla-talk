\newcommand{\propNode}[3]{
  \node (#1) at (#3 PropPos.center) {\large{\color{black!70} #2}};
}

\begin{frame}
  \begin{center}
    {\Large Memory fairness for \textit{operational} (interleaving-based) models:}

    \vspace{0.4cm}
    \onslide<2->{
    \scalebox{0.9}{
      % \fairTrace
      \begin{traceenvNoThreads}{1.4}{0.9}
        \fairTraceImpl
      \end{traceenvNoThreads}
    }
    }

    \vspace{1cm}
    \pause

    \onslide<5->{
      {\Large Memory fairness for \textit{declarative} models: \color{red}{???}}
    }
    
  \end{center}

  % \newcommand{\propPos}{()}
  \onslide<3>{
    \tikz[overlay,remember picture]{
      \node (PropPos) at ([xshift=0.6cm,yshift=1.4cm]current page.center) {\color{red} {}};
      \propNode{SC}{$\mathbf{\top}$}{[xshift=-0.8cm,yshift=-2.0cm]};
      \propNode{TSO}{\small{Buffers are flushed}}{[xshift=0.0cm,yshift=-2.8cm]};
      \propNode{RA}{\ldots}{[xshift=0.9cm,yshift=-2.0cm]};
      \draw[prop] (PropPos.south) -- (SC);
      \draw[prop] (PropPos.south) -- (TSO);
      \draw[prop] (PropPos.south) -- (RA);
    }
  }
      
\end{frame}


\begin{frame}{Declarative memory models avoid explicit interleaving}

  \only<2->{\selectI \upd{\progPosI}{I}}
  \only<3->{\upd{\progPosI}{II}}
  \only<4->{\upd{\progPosI}{IV}}
  \only<5->{\selectII \upd{\progPosII}{I}}
  \only<6->{\upd{\progPosII}{II}}
  \only<7->{\upd{\progPosII}{I}}
  \only<8->{\upd{\progPosII}{II}}
  \only<9->{\upd{\progPosII}{I}}
  \only<10->{\renewcommand{\tIIcolor}{\passiveColor} \upd{\progPosII}{II}}


  \begin{columns}

    \begin{column}{0.4\linewidth}
      \spinlockClientIIExpandedIter

      \vfill

      \vspace{2cm}
    \end{column}

    \begin{column}{0.5\linewidth}
      \pause
      \renewcommand{\hof}{2}
      \renewcommand{\vof}{1}
      \begin{center}
        \begin{tikzpicture}[xscale=2, yscale=0.8]
          % \spinlockInfGraphEvents
          
          \onslide<3->{\node (U1) at (0 * \hof, -0 * \vof) {$\evlab{\lU}{}{l}{0, 1}$};}
          \onslide<4->{\node (W1) at (0 * \hof, -2 * \vof) {$\evlab{\lW}{}{l}{0}$};}
          \onslide<6->{\node (R21) at (1 * \hof, -0 * \vof) {$\evlab{\lR}{}{l}{1}$};}
          \onslide<8->{\node (R22) at (1 * \hof, -2 * \vof) {$\evlab{\lR}{}{l}{1}$};}
          \onslide<10->{
          \node (R23) at (1 * \hof, -4 * \vof) {$\evlab{\lR}{}{l}{1}$};
          \node (R24) at (1 * \hof, -5 * \vof) {$\ldots$};          
        }
                 
          \onslide<11->{\spinlockInfGraphPOText}
          \onslide<12->{\pause \spinlockInfGraphRF}
          \onslide<13->{\pause \spinlockInfGraphMO}
        \end{tikzpicture}
        
      \end{center}

    \end{column}

  \end{columns}

  \begin{center}
    \onslide<14->{$\TSOdecl \defeq acyclic(\lPO \cup \lRF \cup \lMO) \land \ldots$}
  \end{center}
 
  \onslide<15->{
  \tikz[overlay,remember picture]{
    \node (Incomplete) at ([xshift=-1.25cm,yshift=-2.0cm]current page.center) {\includegraphics[width=0.5\textwidth]{incomplete.png}};
  }
}

\end{frame}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "oopsla"
%%% End:
